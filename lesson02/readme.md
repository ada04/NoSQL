## Урок 02 - CAP теорема
[Материал урока](https://github.com/ada04/NoSQL/blob/main/lesson02/lesson02.txt)
  
### Домашнее задание

![CAP теорема](https://bigdataschool.ru/wp-content/uploads/2019/12/cap_0.png)

#### MongoDB

БД MongoDB обычно рассматривается как **CP система**, _но может быть рассмотрена как_ **AP система**.


>Следующие пункты относятся к абстрактной распределенной БД MongoDB.
**MongoDB** обеспечивает strong consistency, потому что это система с одним Master узлом, и все записи идут по умолчанию в него.
Автоматическая смена мастера, в случае отделения его от остальных узлов.
В случае разделения сети, система прекратит принимать записи до тех пор, пока не убедится, что может безопасно завершить их.
Таким образом, система может продолжать работу в случае разделения сети, но теряется CAP-availability всех узлов. Это CP система!

>Давайте узнаем что-то новое о MongoDB:

>Это ACID в ограниченном смысле на уровне документа.
В случае распределенной системы — it's all about that BASE.
В случае отсутствия разделений сети, система гарантирует, что чтение и запись будут согласованными.
Если Master узел упадёт или потеряет связь с остальной системой, некоторые данные не будут реплицированы. Система выберет нового мастера, чтобы оставаться доступной для чтения и записи. (Новый мастер и старый мастер несогласованы).
Система рассматривается как PA / EC (A), так как большинство узлов остаются CAP-available в случае разрыва. Помните, что в CAP MongoDB обычно рассматривается как CP. Создателль PACELC, Даниэль Дж. Абади, говорит, что существует гораздо больше проблем с согласованностью, чем с доступностью, поэтому PA.


#### MSSQL

MSSQL - **CA cистема**

>**CA (Availability + Consistency — Parition tolerance)**, когда данные во всех узлах кластера согласованы и доступны, но не устойчивы к разделению. Это означает, что реплики одной и той же информации, распределенные по разным серверам друг другу, не противоречат друг другу и любой запрос к распределённой системе завершается корректным откликом. Такие системы возможны при поддержке ACID-требований к транзакциям (Атомарность, Согласованность, Изоляция, Долговечность) и абсолютной надежности сети. На практике таких решений на основе кластерных систем управления базами данных почти не существует. Классическим примером CA-системы называют распределённую службу каталогов LDAP, а также реляционные базы данных (PostgreSQL, MySQL, MariaDB, MS SQL Server).

#### Cassandra

Cassandra - **AP Система**

>**AP-система (Availability + Partition tolerance — Consistency)** не гарантирует целостность данных, обеспечивая их доступность и устойчивость к разделению, например, как в распределённых веб-кэшах и DNS. Считается, что большинство NoSQL-СУБД относятся к этому классу систем, обеспечивая лишь некоторой уровень согласованности данных в конечном счете (eventually consistent). Таким образом, AP-система может быть представлена кластером из нескольких узлов, каждый из которых может принимать данные, но не обязуется в тот же момент распространять их на другие сервера. Такая система отлично справляется с отказами нескольких узлов, но, когда они снова начинают работать, возможна выдача пользователям старых данных. К AP-системам относят CoucheDB, Cassandra, Riak, Amazon DynamoDB.
